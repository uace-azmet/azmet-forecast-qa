---
title: "RMarkdown Report Driving `targets` pipeline"
date: "`r Sys.Date()`"
output: html_document
resource_files:
- "data/"
- "R/"
- "renv.lock"
- "_targets.R"
- "config.yml"
- "_targets/"
---

```{r setup, message=FALSE, warning=FALSE}
library(targets)
library(rsconnect)
library(tarchetypes)
library(config)
library(visNetwork)
library(fs)
```

```{r cache-setup}
targets_settings <- config::get('targets')
store_path <- targets_settings$path

tar_config_set(store = store_path)
```

```{r glimpse}
tar_glimpse()
```

```{r plan}
tar_visnetwork()
```

```{r make}
tar_make()
```
Save the _targets data store as output

```{r}
outputs <- list.files("./_targets", recursive = TRUE, full.names = TRUE)
rmarkdown::output_metadata$set(rsc_output_files = outputs)
```

